@let(title = 'User page')
@let(onboarding = false)
@let(pageStyle = 'resources/css/pages-css/user-page.css')
@let(pageJS = 'resources/js/pages/user_page.js')
@let(description = "Manage your plans, create new ones, or modify your personnal informations.")
@let(navPage ='profil')
@include('partials/header')
@include('partials/nav')
@include('partials/flash')

<img src="resources\assets\images\userpage-bg.svg" alt="illustration of a chicken run" />

<main id="user-page">

  {{-- User info --}}
  <section id="user-info">

    <div>
      <h2 class="section-title">
        @if(auth.use('web').isAuthenticated)
          {{ user.username }}
        @else
          You are not authentified
        @end
      </h2>
      <p>
        @if(auth.use('web').isAuthenticated)
          {{ user.email }}
        @else
          <a href="{{ route('auth.register') }}" class="link">Register</a>&ensp;or&ensp;<a href="{{ route('auth.login') }}" class="link">log in</a>&ensp;to enjoy multiple plans.
        @end
      </p>
    </div>

    @if(auth.use('web').isAuthenticated)
      <div class="dropdown">

        <button
          id="user-info-btn"
          class="user-icon"
          aria-label="Show user-related options"
          aria-expanded="false"
          aria-controls="dropdown-menu"
          type="button"
        >
          <svg width="20" height="22" viewBox="0 0 20 22" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M18.3742 12.6563C19.9419 12.1497 20.1067 10.338 19.5448 9.00382C19.4164 8.6642 19.2072 8.361 18.9352 8.12047C18.6015 7.82819 18.0015 8.04644 17.787 7.75998C17.5455 7.43711 18.057 6.97679 18.209 6.75239C18.8803 5.83574 18.1823 4.66964 17.5532 3.92516C17.212 3.4648 16.7265 3.13197 16.1741 2.97972C15.6216 2.82748 15.0341 2.86459 14.5053 3.08516C14.0853 3.22106 13.4342 3.77553 13.1673 3.46874C12.6562 2.88123 12.8574 1.91276 12.0442 1.39439C10.6948 0.533805 8.92744 0.811493 7.51898 1.40868C7.23966 1.54655 7.00803 1.76488 6.85391 2.03557C6.64163 2.40528 6.75769 2.94581 6.49301 3.24419C6.45814 3.27796 6.4134 3.29971 6.3653 3.3063C6.31721 3.31288 6.26827 3.30394 6.2256 3.28079C5.46018 2.88466 4.57573 2.7841 3.74093 2.99831C3.18294 3.23719 2.68599 3.59881 2.28706 4.05627C1.88813 4.51373 1.59748 5.05525 1.43674 5.64056C1.32653 6.06999 1.34826 6.52266 1.4991 6.93956C1.69654 7.43831 2.42138 7.83581 1.73801 8.14743C1.34738 8.32552 0.673575 8.31446 0.50115 8.80301C0.0284326 10.1867 0.0477315 11.6912 0.555788 13.0623C0.61948 13.2236 0.733365 13.3601 0.880613 13.4516C1.02786 13.5432 1.20066 13.585 1.37348 13.5708C1.60519 13.5889 1.92473 13.5127 2.0301 13.7867C2.0718 13.9131 2.06267 14.0508 2.00464 14.1707C1.78841 14.5534 1.59469 14.951 1.41165 15.3547C1.06841 16.4457 2.63839 17.6525 3.39799 18.2353C3.72802 18.4798 4.11016 18.6446 4.51451 18.7168C4.91885 18.789 5.33442 18.7667 5.72869 18.6515C6.08453 18.5368 6.34151 18.1173 6.70706 18.2555C6.87551 18.3193 6.97301 18.8018 7.05176 19.1661C7.37179 20.647 8.92834 21.3448 10.3498 21.1038C11.1952 20.9603 12.2573 20.8514 12.8753 20.2077C13.3339 19.7041 13.0478 18.729 13.3921 18.1183C13.5823 17.7808 14.0277 18.091 14.2977 18.1848C14.649 18.3213 15.0187 18.4044 15.3947 18.4312C16.7039 18.4413 17.649 17.2969 18.3143 16.2945C18.5398 16.0053 18.692 15.6658 18.7579 15.305C18.8558 14.5079 18.3961 13.7733 17.8854 13.1964C17.604 12.8785 18.129 12.735 18.3742 12.6563ZM17.1624 11.5391C16.5512 11.7112 15.911 11.8782 15.7491 12.5925C15.6221 13.2783 16.1388 13.7826 16.4194 14.3204C16.5264 14.4587 16.5845 14.6287 16.5845 14.8036C16.5845 14.9785 16.5264 15.1485 16.4194 15.2869C16.1266 15.6901 15.7815 16.0527 15.3932 16.365C14.7032 16.9171 13.7982 16.2327 13.0728 16.0516C12.8268 16.0311 12.5814 16.0979 12.3797 16.2402C12.1781 16.3826 12.033 16.5914 11.9699 16.8301C11.8271 17.2601 11.8786 17.7241 11.7405 18.143C11.6106 18.5368 11.0727 18.8555 10.1245 18.9734C9.83617 19.0244 9.53935 18.9954 9.26637 18.8894C8.9934 18.7834 8.75474 18.6046 8.5764 18.3723C8.43102 17.9242 8.31144 17.4682 8.21824 17.0064C7.93181 16.1442 7.0836 16.3187 6.50711 16.5674C5.98853 16.7911 5.56245 16.9989 5.17796 16.8015C4.40842 16.4063 3.7335 15.9597 3.36975 15.118C3.34216 15.0037 3.34104 14.8847 3.3665 14.7699C3.39195 14.6552 3.44329 14.5477 3.5166 14.4559C3.8346 13.9257 4.26495 13.3362 4.11161 12.6849C3.94226 11.7952 2.71823 12.5556 2.39254 11.8004C2.23804 11.1745 2.20196 10.5252 2.28615 9.88601C2.3907 9.54697 2.76551 9.49773 3.0504 9.38392C4.03871 9.07068 4.143 8.49457 3.66289 7.63379C3.01691 6.64004 2.96033 5.99804 3.77505 5.18332C4.08679 4.87154 4.29229 4.61313 4.62724 4.60136C5.07146 4.58579 5.76724 5.33883 6.20678 5.53664C6.49069 5.64825 6.80602 5.64999 7.09116 5.54153C7.37629 5.43308 7.61075 5.22222 7.74874 4.95014C8.00194 4.32858 7.85933 3.51783 8.32669 3.16728C8.68005 2.90231 10.574 2.63729 11.1741 2.98023C11.5352 3.18648 11.619 3.82368 11.6571 4.19579C11.6544 4.54475 11.7901 4.88055 12.0346 5.12956C12.279 5.37858 12.6123 5.52048 12.9612 5.52416C13.3708 5.56916 13.6951 5.30711 14.037 5.08541C14.301 4.88112 14.6151 4.75167 14.9464 4.71063C15.4969 4.72406 15.9808 5.28813 16.3025 5.73164C16.6775 6.24877 16.4254 6.69742 16.0512 7.07013C15.8382 7.27783 15.7096 7.557 15.6901 7.85388C15.761 8.2063 15.9151 8.53663 16.1397 8.81729C16.2367 8.9398 16.3604 9.03859 16.5012 9.10616C16.6421 9.17374 16.7966 9.20833 16.9528 9.20729C17.2736 9.26208 17.7048 9.27033 17.8378 9.84697C18.095 10.9612 17.9029 11.2227 17.1624 11.5391ZM9.66394 5.65769C8.5474 5.84834 7.51378 6.36967 6.6968 7.15423C5.87982 7.9388 5.3171 8.95049 5.08144 10.0584C4.70269 12.1067 5.60306 14.3721 7.47694 15.3785C10.0067 16.8327 13.3122 15.3534 14.4667 12.8107C14.739 12.078 14.8987 11.3083 14.9403 10.5278C15.0273 7.50232 12.68 5.30531 9.66394 5.65769ZM9.59119 13.9417C8.42749 13.9394 7.53188 13.0005 7.17885 11.9556C6.63649 9.97994 8.10326 7.35269 10.3373 7.49351C11.0682 7.55173 11.7477 7.89176 12.2325 8.44175C12.7173 8.99174 12.9693 9.70864 12.9354 10.441C12.9685 12.279 11.4639 13.978 9.59119 13.9417Z"
              fill="#471A03"
            />
          </svg>
        </button>

        <div id="dropdown-menu" class="dropdown-content" role="menu">
          <a class="dropdown-link" href="{{ route('edit-username') }}">Edit username</a>
          <a class="dropdown-link" href="{{ route('edit-email') }}">Edit email adress</a>
          <a class="dropdown-link" href="{{ route('edit-password') }}">Edit password</a>
          {{-- Log out --}}
          <form action="{{ route('auth.logout') }}?_method=DELETE" method="POST">
            {{ csrfField() }}
        <button class="dropdown-link" type="submit">Log out</button>
          </form>
          {{-- Delete account --}}
          @component('components/delete_form', {
            name: 'Delete account',
            action: route('user-destroy'),
            sentenceEnd: 'your account',
            addedClass: "btn-w-full"
          })
          @end
          {{-- End delete account --}}
        </div>
      </div>
    @end
    {{-- End if auth --}}

  </section>

  {{-- Plans list --}}
  <section>

    <h3 class="section-title">
      @if(auth.use('web').isAuthenticated)
        My plans
      @else
        Guest plans
      @end
    </h3>

    <div id="plans">

      {{-- New plan --}}
      <a href="{{ route('onboarding') }}" id="new-plan" aria-label="Create a new plan">
        <div id="new-plan-container">
          <div class="user-icon">
            <svg width="20" height="22" viewBox="0 0 20 22" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M2.24038 12.9605C4.26673 10.284 6.60752 8.05859 8.91103 5.64288C9.75103 4.7368 10.6023 3.84129 11.4648 2.95634C11.9495 2.45905 12.5356 1.7125 13.1477 1.18675C13.8776 0.559827 14.4544 0.840439 14.9654 1.45536C15.3367 1.90199 15.7239 2.33504 16.1156 2.76374C17.0427 3.77834 18.0489 4.71603 18.9643 5.7355C19.844 6.74073 18.4618 7.54675 17.811 8.18234C16.8263 9.14331 15.8582 10.121 14.9068 11.1153C13.0044 13.1034 11.1713 15.155 9.40753 17.27C8.60837 18.2645 7.58034 19.0507 6.41128 19.5615C5.56412 19.9588 4.60877 20.3274 3.74252 20.6808C2.63717 21.1867 0.493404 21.7816 0.780016 19.7046C0.945354 18.3723 1.17752 17.0431 1.38845 15.7121C1.53245 14.8013 1.679 13.741 2.24038 12.9605ZM4.07818 16.7245C4.99265 17.6807 5.21027 17.6992 5.88635 17.5766C6.30362 17.5009 7.05838 16.8588 7.4867 16.4543C8.42753 15.5404 9.31555 14.5737 10.1464 13.5589C11.1274 12.3648 12.0016 11.2854 13.036 10.136C13.2668 9.87955 13.6525 9.41954 13.9385 9.12809C14.4077 8.64993 14.6416 8.39481 14.3765 8.02641C14.0388 7.55688 12.5976 6.23189 12.2098 5.78178C11.813 5.32113 11.4954 5.60474 11.3057 5.81294C10.5107 6.68586 9.53252 7.75049 9.02991 8.27583C7.8128 9.54798 5.38235 11.939 4.11973 13.4198C3.66991 13.8929 3.36541 14.4852 3.24245 15.1263C3.16127 15.7444 3.30917 16.0178 4.07818 16.7245ZM15.7327 6.88851C16.1771 7.08456 16.5118 6.76559 16.7371 6.45528C16.7722 6.40697 16.7898 6.34809 16.7869 6.2884C16.784 6.22872 16.7607 6.17183 16.721 6.12719C16.0813 5.40168 14.6797 3.88705 14.005 3.1732C13.9666 3.13219 13.9139 3.10748 13.8578 3.10419C13.8017 3.1009 13.7465 3.11926 13.7036 3.1555C13.3248 3.46998 12.7675 3.94911 13.1486 4.2955C13.5178 4.63101 15.2804 6.68898 15.7327 6.88851Z"
                fill="#471A03"
              />
            </svg>
          </div>
        </div>
        <p>
          @if(auth.use('web').isAuthenticated)
            New Project
          @else
            Creating a new project will erase any existing&nbsp;plan.
          @end
        </p>
      </a>

      @if(auth.use('web').isAuthenticated)

        @if(user.plans.length > 0)
          @each(plan in user.plans)

            <div class="plan">

              <a href="{{ route('plan', { id: plan.id }) }}">

                <div class="plan-img">
                </div>

                <div class="plan-info">

                  <div class="plan-completion">
                    @if(plan.completionPercentage === 100)
                      <svg width="48" height="49" viewBox="0 0 48 49" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect y="0.0118408" width="48" height="48" rx="24" fill="#FFC300" />
                        <g opacity="0.7" clip-path="url(#clip0_607_4669)">
                          <path
                            d="M38.9064 7.81075C38.9064 8.29633 38.6872 8.689 38.1999 8.689C37.7126 8.689 37.3164 8.29633 37.3164 7.81075C37.3164 7.32517 37.7126 6.7572 38.1999 6.7572C38.6872 6.7572 38.9064 7.32517 38.9064 7.81075Z"
                            fill="#482300"
                          />
                          <path
                            d="M24 46.0118C20.7535 46.0118 17.6279 45.3212 14.7074 43.9591C10.9052 42.264 9.77801 40.0534 9.46773 38.6248C8.90677 38.4197 8.27745 38.0918 7.60606 37.5835C6.18263 36.5071 4.89769 34.8663 3.78454 32.7067L3.76876 32.6734C2.59602 29.9317 2 27.0182 2 24.0118C2 11.8812 11.8693 2.01184 24 2.01184C27.2588 2.01184 30.3967 2.70778 33.3241 4.08037C33.5871 4.20308 33.701 4.51686 33.5766 4.77981C33.4521 5.04276 33.1401 5.1567 32.8771 5.03224C30.0899 3.72626 27.1028 3.06363 23.9982 3.06363C12.4496 3.06363 3.05179 12.4614 3.05179 24.0118C3.05179 26.8692 3.61626 29.6372 4.7294 32.2404C6.37371 35.4255 8.08462 36.8262 9.36781 37.4345C9.44494 36.1583 10.1058 35.1451 11.0524 34.8506C11.8693 34.5981 12.7143 34.9365 13.3716 35.7814C13.8309 36.3704 13.9256 37.0558 13.6346 37.6624C13.2647 38.4337 12.3374 38.921 11.2172 38.9368C11.0454 38.9385 10.8508 38.9315 10.637 38.9052C11.0489 40.0745 12.1743 41.6732 15.1439 42.9967C17.9312 44.2974 20.9077 44.9548 24 44.9548C35.5504 44.9548 44.9482 35.557 44.9482 24.0066C44.9482 20.0448 43.8368 16.19 41.7367 12.8541C41.5825 12.6087 41.6561 12.2844 41.9015 12.1283C42.1469 11.9741 42.4712 12.0477 42.6273 12.2931C44.8343 15.7956 46.0018 19.8467 46.0018 24.0048C46.0018 36.1355 36.1324 46.0048 24.0018 46.0048L24 46.0118ZM10.4161 37.8008C10.7579 37.8762 11.0279 37.892 11.2032 37.8885C11.9114 37.878 12.4934 37.6115 12.6862 37.2101C12.8317 36.9068 12.6862 36.6176 12.5407 36.43C12.3216 36.1478 11.8763 35.6973 11.3645 35.8568C10.8561 36.0146 10.4652 36.693 10.4178 37.5046C10.4126 37.5835 10.4108 37.6834 10.4161 37.8008Z"
                            fill="#482300"
                          />
                        </g>
                        <path
                          d="M33.501 30.5119C33.921 29.6685 37.1677 18.5119 34.501 16.1785C32.501 15.5119 28.6377 20.5352 28.6377 20.5352C28.6377 20.5352 26.5143 12.8452 22.8343 12.8452C20.501 12.8452 17.501 17.5119 17.501 17.8452C14.8343 15.5119 12.1677 12.8452 10.6677 17.7985C8.83433 23.8452 11.1677 32.1419 14.751 33.3519C19.1677 34.8419 31.8343 33.8419 33.501 30.5085V30.5119Z"
                          fill="white"
                          fill-opacity="0.5"
                        />
                        <path
                          d="M23.6093 34.0218C22.4993 34.0218 21.3426 33.9418 20.1526 33.7718C18.2993 33.5051 15.1059 32.7685 14.5093 30.8085C12.9893 25.6951 11.6493 19.9651 12.0826 18.6718L12.1093 18.6085C12.1726 18.4818 12.3326 18.2618 12.7093 18.1951C13.8226 18.0018 16.6859 19.4018 18.8059 21.0918C19.1193 20.2385 19.4426 19.5118 19.6393 19.0918C20.0259 18.2585 22.0359 14.0985 23.5293 14.0051H23.5659H23.6026C25.1393 14.1418 27.6293 16.7751 28.8926 19.4751C30.6793 17.6851 32.7559 16.1585 33.8059 15.7785C34.3393 15.5851 34.7359 15.6318 34.9759 15.9151C36.1793 17.3185 36.1093 20.6718 35.8393 23.2385C35.5426 26.0785 34.8459 29.0918 34.2226 30.2518L34.2026 30.2885C32.8693 32.3218 28.7726 34.0218 23.6126 34.0218H23.6093ZM15.4426 30.5251C15.7559 31.5485 17.6126 32.4218 20.2926 32.8051C25.1793 33.5051 31.5893 32.4518 33.3726 29.7651C34.4726 27.6851 35.9426 18.8385 34.3059 16.6351C33.6226 16.7318 31.2193 18.4551 29.2859 20.4351C30.1559 22.9218 29.6859 25.1251 28.7493 26.0351C28.2459 26.5285 27.5926 26.6651 26.9626 26.4118C26.1259 26.0785 25.6759 25.4318 25.6893 24.5951C25.7093 23.3718 26.7793 21.7551 28.1626 20.2318C27.0293 17.5518 24.5959 15.1385 23.5593 14.9785C23.0259 15.1085 21.4026 17.3185 20.0826 20.4818C19.8993 20.9218 19.7326 21.3518 19.5893 21.7618C19.6293 21.7985 19.6659 21.8318 19.7026 21.8685C21.8693 23.9285 22.0193 25.3151 21.7659 26.1151C21.5426 26.8185 20.9259 27.2918 20.0726 27.4118C19.1026 27.5518 18.5826 27.1518 18.3159 26.7951C17.5659 25.7818 17.9159 23.8118 18.4659 22.0651C16.3493 20.2818 13.6859 19.1385 12.9726 19.1351C12.8659 20.1418 13.5259 24.0751 15.4426 30.5185V30.5251ZM19.2593 22.8018C18.7826 24.4651 18.7126 25.7251 19.1059 26.2351C19.2093 26.3651 19.4026 26.5318 19.9359 26.4585C20.2093 26.4185 20.6959 26.2851 20.8393 25.8285C21.0593 25.1351 20.4726 24.0185 19.2593 22.8051V22.8018ZM28.5193 21.2618C27.6126 22.3018 26.9093 23.3618 26.7059 24.2518C26.5593 24.9051 26.7426 25.2818 27.3193 25.5151C27.4926 25.5851 27.7593 25.6418 28.0659 25.3451C28.7126 24.7151 29.0126 23.0785 28.5193 21.2651V21.2618Z"
                          fill="#471A03"
                        />
                        <defs>
                          <clipPath id="clip0_607_4669">
                            <rect width="44" height="44" fill="white" transform="translate(2 2.01184)" />
                          </clipPath>
                        </defs>
                      </svg>

                    @else
                      <div
                        class="circular-progress-bar"
                        data-plan-id="{{ plan.id }}"
                        data-percentage="{{ plan.completionPercentage || 0 }}"
                      >
                        <div class="circular-progress-bar-inner">
                          <span class="completion-text" data-plan-id="{{ plan.id }}">
                            {{ plan.completionPercentage || 0 }}
                        <span class="percent-symbol">%</span>
                          </span>
                        </div>
                      </div>
                    @end
                  </div>

                  <div class="plan-title-comment">
                    <h3 class="plan-title">
                      {{ plan.name }}
                    </h3>
                    @if(plan.completionPercentage === 100)
                      <p class="plan-comment">
                        Your hens live like royalty
                      </p>
                    @elseif(plan.completionPercentage >= 66)
                      <p class="plan-comment">
                        Almost worthy of the crown
                      </p>
                    @elseif(plan.completionPercentage >= 33)
                      <p class="plan-comment">
                        Not yet fit for the realm
                      </p>
                    @else
                      <p class="plan-comment">
                        Nowhere near a royal coop
                      </p>
                    @end
                  </div>
                </div>

              </a>

              <div class="plan-actions">
                <!-- Duplication -->
                <form action="{{ route('duplicate-plan', { id: plan.id }) }}" method="POST" class="inline">
                  {{ csrfField() }}
                  <button type="submit" class="user-icon" type="button" aria-label="Duplicate plan">
                    <svg width="19" height="28" viewBox="0 0 19 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M8.79089 3.95536C12.3647 1.88437 15.7412 -0.0711127 17.6698 1.38798L17.6747 1.38114C20.0099 3.14809 18.1765 13.1515 18.1532 13.2552C18.1356 13.343 18.1055 13.4253 18.0692 13.5032C17.9861 13.7014 17.8512 13.8655 17.6698 13.9632C17.6687 13.9638 17.6653 13.9648 17.661 13.9671C17.5979 14.007 17.531 14.0401 17.4608 14.0667C16.9091 14.3412 15.3317 15.0986 13.5721 15.7093C13.482 18.8188 12.891 22.0413 12.8778 22.0999C12.8145 22.4164 12.6189 22.6725 12.3612 22.8265C12.2687 22.9549 12.1484 23.0662 12.0009 23.1477C11.3874 23.4776 10.7365 23.8568 10.0682 24.2444C6.49447 26.3154 3.11791 28.2719 1.18933 26.8128L1.18445 26.8196C-1.14952 25.0538 0.681488 15.0609 0.70691 14.9456C0.770229 14.6284 0.965072 14.37 1.22351 14.2161C1.31589 14.0883 1.43685 13.978 1.58386 13.8968C2.1972 13.567 2.84742 13.1877 3.5155 12.8001C4.20705 12.3993 4.89175 12.0033 5.55945 11.635C5.55654 11.5776 5.55457 11.5187 5.55457 11.4583C5.71127 8.63698 6.20177 5.96763 6.21375 5.91435C6.25701 5.69788 6.36151 5.50879 6.50574 5.36161C6.59712 5.23806 6.7152 5.13119 6.85828 5.05204C7.47172 4.72219 8.12268 4.34302 8.79089 3.95536ZM11.0262 11.9544C10.1646 11.49 6.28734 13.7278 4.61414 14.7005C3.98481 15.0642 3.37419 15.4137 2.79578 15.7347C2.07231 19.6111 2.03672 24.2258 2.55847 25.0911C3.42058 25.555 7.29755 23.3166 8.97058 22.344C9.59981 21.9804 10.2096 21.6298 10.788 21.3089C11.5111 17.4332 11.5477 12.8205 11.0262 11.9544ZM16.3007 3.10966C15.4389 2.64553 11.5628 4.88304 9.88953 5.85575C9.33928 6.17377 8.80243 6.47999 8.28992 6.76689C8.0649 7.98765 7.90734 9.27875 7.81433 10.5013C9.66638 9.69118 11.2742 9.38525 12.3944 10.2327L12.4003 10.2259C13.0581 10.7239 13.3838 11.8758 13.5136 13.2757C14.3796 12.9611 15.2737 12.5859 16.119 12.1673C16.7897 8.35614 16.809 3.95327 16.3007 3.10966Z"
                        fill="#471A03"
                      />
                    </svg>
                  </button>
                </form>

                <div>
                  {{-- Delete plan --}}
                  @component('components/delete_form', {
                    name: true,
                    action: route('delete-plan', { id: plan.id}),
                    sentenceEnd: `the plan: ${plan.name}`
                  })
                  @end
                  {{-- End Delete plan --}}
                </div>
              </div>

            </div>
          @end
          {{-- End Each plan --}}
        @end
        {{-- End If plan --}}
      @else
        {{-- If auth else --}}
        <div class="plan">

          <a href="{{ route('guest-plan') }}">

            <div class="plan-img">
            </div>

            <div class="plan-info">

              <div class="plan-completion">
                @if(plan.completionPercentage === 100)
                  <svg width="48" height="49" viewBox="0 0 48 49" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect y="0.0118408" width="48" height="48" rx="24" fill="#FFC300" />
                    <g opacity="0.7" clip-path="url(#clip0_607_4669)">
                      <path
                        d="M38.9064 7.81075C38.9064 8.29633 38.6872 8.689 38.1999 8.689C37.7126 8.689 37.3164 8.29633 37.3164 7.81075C37.3164 7.32517 37.7126 6.7572 38.1999 6.7572C38.6872 6.7572 38.9064 7.32517 38.9064 7.81075Z"
                        fill="#482300"
                      />
                      <path
                        d="M24 46.0118C20.7535 46.0118 17.6279 45.3212 14.7074 43.9591C10.9052 42.264 9.77801 40.0534 9.46773 38.6248C8.90677 38.4197 8.27745 38.0918 7.60606 37.5835C6.18263 36.5071 4.89769 34.8663 3.78454 32.7067L3.76876 32.6734C2.59602 29.9317 2 27.0182 2 24.0118C2 11.8812 11.8693 2.01184 24 2.01184C27.2588 2.01184 30.3967 2.70778 33.3241 4.08037C33.5871 4.20308 33.701 4.51686 33.5766 4.77981C33.4521 5.04276 33.1401 5.1567 32.8771 5.03224C30.0899 3.72626 27.1028 3.06363 23.9982 3.06363C12.4496 3.06363 3.05179 12.4614 3.05179 24.0118C3.05179 26.8692 3.61626 29.6372 4.7294 32.2404C6.37371 35.4255 8.08462 36.8262 9.36781 37.4345C9.44494 36.1583 10.1058 35.1451 11.0524 34.8506C11.8693 34.5981 12.7143 34.9365 13.3716 35.7814C13.8309 36.3704 13.9256 37.0558 13.6346 37.6624C13.2647 38.4337 12.3374 38.921 11.2172 38.9368C11.0454 38.9385 10.8508 38.9315 10.637 38.9052C11.0489 40.0745 12.1743 41.6732 15.1439 42.9967C17.9312 44.2974 20.9077 44.9548 24 44.9548C35.5504 44.9548 44.9482 35.557 44.9482 24.0066C44.9482 20.0448 43.8368 16.19 41.7367 12.8541C41.5825 12.6087 41.6561 12.2844 41.9015 12.1283C42.1469 11.9741 42.4712 12.0477 42.6273 12.2931C44.8343 15.7956 46.0018 19.8467 46.0018 24.0048C46.0018 36.1355 36.1324 46.0048 24.0018 46.0048L24 46.0118ZM10.4161 37.8008C10.7579 37.8762 11.0279 37.892 11.2032 37.8885C11.9114 37.878 12.4934 37.6115 12.6862 37.2101C12.8317 36.9068 12.6862 36.6176 12.5407 36.43C12.3216 36.1478 11.8763 35.6973 11.3645 35.8568C10.8561 36.0146 10.4652 36.693 10.4178 37.5046C10.4126 37.5835 10.4108 37.6834 10.4161 37.8008Z"
                        fill="#482300"
                      />
                    </g>
                    <path
                      d="M33.501 30.5119C33.921 29.6685 37.1677 18.5119 34.501 16.1785C32.501 15.5119 28.6377 20.5352 28.6377 20.5352C28.6377 20.5352 26.5143 12.8452 22.8343 12.8452C20.501 12.8452 17.501 17.5119 17.501 17.8452C14.8343 15.5119 12.1677 12.8452 10.6677 17.7985C8.83433 23.8452 11.1677 32.1419 14.751 33.3519C19.1677 34.8419 31.8343 33.8419 33.501 30.5085V30.5119Z"
                      fill="white"
                      fill-opacity="0.5"
                    />
                    <path
                      d="M23.6093 34.0218C22.4993 34.0218 21.3426 33.9418 20.1526 33.7718C18.2993 33.5051 15.1059 32.7685 14.5093 30.8085C12.9893 25.6951 11.6493 19.9651 12.0826 18.6718L12.1093 18.6085C12.1726 18.4818 12.3326 18.2618 12.7093 18.1951C13.8226 18.0018 16.6859 19.4018 18.8059 21.0918C19.1193 20.2385 19.4426 19.5118 19.6393 19.0918C20.0259 18.2585 22.0359 14.0985 23.5293 14.0051H23.5659H23.6026C25.1393 14.1418 27.6293 16.7751 28.8926 19.4751C30.6793 17.6851 32.7559 16.1585 33.8059 15.7785C34.3393 15.5851 34.7359 15.6318 34.9759 15.9151C36.1793 17.3185 36.1093 20.6718 35.8393 23.2385C35.5426 26.0785 34.8459 29.0918 34.2226 30.2518L34.2026 30.2885C32.8693 32.3218 28.7726 34.0218 23.6126 34.0218H23.6093ZM15.4426 30.5251C15.7559 31.5485 17.6126 32.4218 20.2926 32.8051C25.1793 33.5051 31.5893 32.4518 33.3726 29.7651C34.4726 27.6851 35.9426 18.8385 34.3059 16.6351C33.6226 16.7318 31.2193 18.4551 29.2859 20.4351C30.1559 22.9218 29.6859 25.1251 28.7493 26.0351C28.2459 26.5285 27.5926 26.6651 26.9626 26.4118C26.1259 26.0785 25.6759 25.4318 25.6893 24.5951C25.7093 23.3718 26.7793 21.7551 28.1626 20.2318C27.0293 17.5518 24.5959 15.1385 23.5593 14.9785C23.0259 15.1085 21.4026 17.3185 20.0826 20.4818C19.8993 20.9218 19.7326 21.3518 19.5893 21.7618C19.6293 21.7985 19.6659 21.8318 19.7026 21.8685C21.8693 23.9285 22.0193 25.3151 21.7659 26.1151C21.5426 26.8185 20.9259 27.2918 20.0726 27.4118C19.1026 27.5518 18.5826 27.1518 18.3159 26.7951C17.5659 25.7818 17.9159 23.8118 18.4659 22.0651C16.3493 20.2818 13.6859 19.1385 12.9726 19.1351C12.8659 20.1418 13.5259 24.0751 15.4426 30.5185V30.5251ZM19.2593 22.8018C18.7826 24.4651 18.7126 25.7251 19.1059 26.2351C19.2093 26.3651 19.4026 26.5318 19.9359 26.4585C20.2093 26.4185 20.6959 26.2851 20.8393 25.8285C21.0593 25.1351 20.4726 24.0185 19.2593 22.8051V22.8018ZM28.5193 21.2618C27.6126 22.3018 26.9093 23.3618 26.7059 24.2518C26.5593 24.9051 26.7426 25.2818 27.3193 25.5151C27.4926 25.5851 27.7593 25.6418 28.0659 25.3451C28.7126 24.7151 29.0126 23.0785 28.5193 21.2651V21.2618Z"
                      fill="#471A03"
                    />
                    <defs>
                      <clipPath id="clip0_607_4669">
                        <rect width="44" height="44" fill="white" transform="translate(2 2.01184)" />
                      </clipPath>
                    </defs>
                  </svg>

                @else
                  <div
                    class="circular-progress-bar"
                    data-plan-id="{{ plan.id }}"
                    data-percentage="{{ plan.completionPercentage || 0 }}"
                  >
                    <div class="circular-progress-bar-inner">
                      <span class="completion-text" data-plan-id="{{ plan.id }}">
                        {{ plan.completionPercentage || 0 }}
                    <span class="percent-symbol">%</span>
                      </span>
                    </div>
                  </div>
                @end
              </div>

              <div class="plan-title-comment">
                <h3 class="plan-title">
                  Guest plan
                </h3>
                @if(plan.completionPercentage === 100)
                  <p class="plan-comment">
                    Your hens live like royalty
                  </p>
                @elseif(plan.completionPercentage >= 66)
                  <p class="plan-comment">
                    Almost worthy of the crown
                  </p>
                @elseif(plan.completionPercentage >= 33)
                  <p class="plan-comment">
                    Not yet fit for the realm
                  </p>
                @else
                  <p class="plan-comment">
                    Nowhere near a royal coop
                  </p>
                @end
              </div>
            </div>

          </a>
        </div>

      @end
      {{-- End If auth --}}
    </div>

  </section>

</main>
</body>
</html>
