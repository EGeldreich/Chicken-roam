<form
  x-data="{ showConfirm: false }"
  @submit.prevent="if (showConfirm) $el.submit()"
  action="{{ action }}"
  method="POST"
  class="{{ addedClass || '' }}"
>
  {{ csrfField() }}
  <input type="hidden" name="_method" value="DELETE" />

  <button
    type="button"
    @click="$refs.confirmDialog.showModal()"
    class="
    {{ typeof name === 'boolean' ? 'user-icon' : 'btn btn-danger w-full del-first' }}"
  >
    @if(typeof name === 'boolean' && name)
      <svg width="18" height="20" viewBox="0 0 18 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M16.0365 3.60471C15.2103 3.58911 14.3784 3.55266 13.5892 3.54238C12.3941 3.52678 12.3525 3.63069 12.3525 3.28779C12.3728 2.83675 12.2824 2.3876 12.0893 1.97951C11.8961 1.57142 11.606 1.21679 11.2443 0.946557C10.6556 0.602923 9.98989 0.413017 9.3085 0.394346C8.62711 0.375675 7.95199 0.528839 7.34536 0.83972C6.3956 1.35347 6.00365 2.41618 5.94286 3.44841C5.94286 3.83994 5.69131 3.76982 5.17175 3.77619C4.47762 3.78471 3.69942 3.77691 3.00503 3.77619C2.39612 3.7543 1.78646 3.76565 1.17878 3.81021C0.630572 3.87358 0.414347 4.34421 0.448847 4.92969C0.493847 5.69297 0.807797 5.94009 1.15808 5.94291C1.62995 5.94666 2.18806 5.94197 2.38947 5.95071C2.77696 5.96747 2.72465 5.97407 2.75581 6.27804C2.80366 6.97071 2.93768 9.37742 3.00023 10.2669C3.18023 12.8244 3.48293 15.9576 3.73786 18.5067C3.80022 19.1302 3.99957 19.4259 4.87576 19.4732C7.41076 19.6099 11.7689 19.6341 14.3019 19.58C15.4899 19.5578 15.3869 19.195 15.4287 18.2105C15.4911 16.7453 15.5483 15.2909 15.5739 13.8838C15.5974 12.5866 15.6209 11.2894 15.6444 9.99216C15.6669 8.74978 15.6453 7.61908 15.7249 6.37937C15.7528 5.94557 15.8279 5.92431 16.5368 5.91715C17.4651 5.90781 17.5524 5.32341 17.5571 4.83714C17.566 3.90111 16.8392 3.61986 16.0365 3.60471ZM7.64607 3.23578C7.69804 2.86193 7.89224 2.52255 8.18822 2.28832C8.48419 2.05409 8.85912 1.94308 9.23491 1.97841C9.54144 2.01459 9.83008 2.14189 10.0635 2.34385C10.2969 2.54581 10.4644 2.81314 10.5443 3.11128C10.6379 3.61003 10.6177 3.68286 10.2949 3.68286C9.4532 3.68286 8.60405 3.74053 7.78006 3.66208C7.56185 3.64112 7.56785 3.51092 7.64607 3.23578ZM13.6191 13.6398C13.6004 14.8888 13.6229 16.1578 13.5053 17.4015C13.5053 17.6811 13.3709 17.6806 12.9812 17.6806C11.8095 17.6806 10.5339 17.6962 9.34928 17.665C8.41501 17.6404 7.09981 17.6372 6.15372 17.587C5.87 17.572 5.69783 17.5751 5.64597 17.2141C5.48915 16.1218 5.4092 15.0251 5.3189 13.924C5.1122 11.4034 4.87553 8.81106 4.6616 6.35466C4.61581 5.82932 4.58761 5.82639 4.9847 5.83378C5.67215 5.84657 8.56726 5.92629 9.25572 5.94291C10.5495 5.97407 12.4357 5.95847 13.2462 5.98967C13.6359 6.00467 13.6203 6.14556 13.6671 6.80023C13.7391 7.80823 13.6386 12.343 13.6191 13.6398ZM11.2041 7.29906C10.5495 7.34582 10.4151 7.32272 10.378 8.24991C10.2948 10.3215 10.378 12.973 10.3935 15.1087C10.4019 16.2535 10.2785 16.5074 11.2311 16.5527C12.3071 16.6617 12.1539 16.1922 12.217 15.3106C12.3603 12.897 12.3656 10.4772 12.2329 8.06293C12.1561 7.32538 11.7261 7.26174 11.2041 7.29906ZM8.46068 7.84461C8.39075 7.11017 7.49836 6.98083 6.87297 7.33719C6.46797 7.54315 6.56866 8.09927 6.54841 8.47768C6.50569 10.9447 6.64989 13.4115 6.97977 15.8568C7.05773 16.5115 7.40063 16.4959 7.93066 16.5115C8.06096 16.5193 8.19139 16.4984 8.31267 16.4501C8.43396 16.4018 8.54312 16.3274 8.63241 16.2322C8.72169 16.137 8.78891 16.0233 8.82927 15.8991C8.86963 15.775 8.88216 15.6435 8.86595 15.514C8.81285 13.6574 8.58256 10.7276 8.54214 8.87871C8.54127 8.62048 8.49185 8.17195 8.46068 7.84461Z"
          fill="#471A03"
        />
      </svg>
    @else
      {{ name }}
    @end
  </button>

  {{-- Confirmation Dialog --}}
  <dialog
    x-ref="confirmDialog"
    class="fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 rounded-lg shadow-xl p-6 backdrop:bg-gray-600/50 max-w-md w-full"
  >
    <p class="mb-4">
      Are you sure you want to delete {{ sentenceEnd }}?
    </p>

    <div class="flex gap-4">
      <button type="submit" @click="showConfirm = true" class="btn btn-danger">
        Yes, Delete
      </button>
      <button type="button" @click="$refs.confirmDialog.close()" class="btn btn-primary">
        Cancel
      </button>
    </div>
  </dialog>
</form>
