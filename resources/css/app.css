@import 'tailwindcss';
@source "../views";

@theme {
  /* breakpoints override */
  --breakpoint-xs: 30rem;

  /* Colors */
  --color-green-main: #05804d;
  --color-green-secondary: #05804d33;
  --color-green-hover: #04663e;

  --color-bamboo-50: #f7f3e9;
  --color-bamboo-100: #f6edd9;
  --color-bamboo-200: #f2e9d5;
  --color-bamboo-300: #ffcb6b;
  --color-bamboo-400: #ffa92f;
  --color-bamboo-500: #ff8d07;
  --color-bamboo-600: #f1781e;
  --color-bamboo-700: #de6408;
  --color-bamboo-800: #a34209;
  --color-bamboo-900: #83380b;
  --color-bamboo-950: #471a03;
  --color-bamboo-0: rgba(71, 26, 3, 0.25);

  --color-lightning-50: #ffffea;
  --color-lightning-100: #fffcc5;
  --color-lightning-200: #fffa85;
  --color-lightning-300: #fff046;
  --color-lightning-400: #ffe21b;
  --color-lightning-500: #ffc300;
  --color-lightning-600: #e29700;
  --color-lightning-700: #bb6b02;
  --color-lightning-800: #985308;
  --color-lightning-900: #7c430b;
  --color-lightning-950: #482300;

  --color-bush: #81b995;
  --color-tree: #b6d5a0;
  --color-perch: #d2db93;
  --color-shelter: #f4cf8c;
  --color-fence: #ecbb95;
  --color-dustbath: #d0bea8;
  --color-waterer: #a8d1c6;
  --color-insectary: #b8c6e2;

  --color-white-0: rgba(255, 255, 255, 0.5);

  --color-orange-main: #e06500;
  --color-orange-active: #f1781e;

  --color-bg-main: #fff4d9;

  --color-tool-hover: #f2e9d5;

  /* Fonts */
  --font-sora: Sora, sans-serif;
  --font-averia: Averia Sans Libre, sans-serif;
}

@layer components {
  /*  */
  /* BUTTONS */
  /*  */
  .btn {
    @apply rounded-md h-12 px-5 self-center duration-300 cursor-pointer w-auto font-sora flex  justify-center items-center text-base whitespace-nowrap;
  }
  .btn-primary {
    @apply bg-bamboo-600 text-bamboo-950 hover:bg-bamboo-400;
  }
  .btn-secondary {
    @apply bg-none text-bamboo-950 border border-bamboo-0 hover:bg-bamboo-600 hover:border-bamboo-600;
  }
  .btn-tertiary {
    @apply bg-none text-bamboo-950 border border-solid border-transparent hover:border-bamboo-0;
  }
  .btn-danger {
    @apply rounded-md text-red-800 hover:bg-bamboo-300;
  }
  .tool-btn {
    @apply border-0 py-0.5 px-0.5;
  }
  .mini-tool {
    @apply rounded-none flex justify-center py-2 bg-white hover:bg-tool-hover;
  }
  /* .active-tool {
    @apply bg-black hover:bg-black;
  } */

  /*  */
  /* TEXT */
  /*  */
  .link {
    @apply text-bamboo-700 underline font-sora;
  }
  .body {
    @apply text-bamboo-900 text-lg font-sora;
  }
  .title {
    @apply text-bamboo-950 md:text-5xl text-3xl font-semibold font-averia;
  }

  /* FLASH MSGS */
  .flash {
    @apply font-sora text-sm border border-bamboo-0 rounded-md text-bamboo-950 px-4 py-3 absolute top-18 left-18;
  }
  .flash-success {
    @apply bg-bamboo-300;
  }
  .flash-error {
    @apply bg-lightning-100;
  }

  /*  */
  /* ELEMENTS STYLING */
  /*  */
  .temporary {
    @apply opacity-40 border-dashed border-2 border-black;
  }
  .fence {
    @apply absolute h-1 bg-black transform origin-left;
  }
  .door {
    @apply outline-2 outline-dashed outline-gray-500;
  }
  .shelter {
    @apply absolute bg-gray-700;
  }
  .waterer {
    @apply absolute bg-blue-300 rounded-full;
  }
  .perch {
    @apply absolute bg-amber-900;
  }
  .shrub {
    @apply absolute bg-green-950;
  }
  .insectary {
    @apply absolute bg-yellow-700;
  }
  .dustbath {
    @apply absolute bg-gray-500;
  }
  .tree {
    @apply absolute bg-green-300;
  }
  /*  */
  /* SELECTION */
  /*  */
  .selected {
    @apply border-3 border-green-800;
  }
  /*  */
  /* POINTS */
  /*  */
  .point {
    @apply h-4 w-4 rounded-full absolute transform -translate-x-1/2 -translate-y-1/2;
  }
  .connection-point {
    @apply bg-green-500;
  }
  .movable-point {
    @apply bg-orange-500;
  }
}

body {
  font-family: 'IBM Plex Mono', monospace;
}

.viewport-container {
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: relative;
}

.viewport-container.panning {
  cursor: grabbing;
}

.canvas-content {
  transform-origin: 0 0;
  position: absolute;
  width: 10000px;
  height: 10000px;
}

.btn-sm {
  font-size: 0.875rem;
  line-height: 1;
  padding: 0.25rem 0.5rem;
  height: auto;
}

/* Style pour l'indicateur de zoom */
#zoomLevel {
  font-size: 0.875rem;
  font-weight: 500;
  min-width: 3rem;
  text-align: center;
}

.enclosure-complete {
  border: 2px solid #4caf50;
}
.snapping-to-connection {
  background-color: #4caf50 !important;
  height: 0.2rem !important; /* Slightly thicker when snapping */
  box-shadow: 0 0 8px rgba(76, 175, 80, 0.6);
}
.placement-error {
  animation: shake 0.5s;
}

.invalid-placement {
  background-color: red !important;
}
.valid-placement {
  background-color: black;
}
.moving {
  opacity: 0.4;
}

@keyframes shake {
  0%,
  100% {
    transform: translate(-50%, -50%);
  }
  10%,
  30%,
  50%,
  70%,
  90% {
    transform: translate(-55%, -50%);
  }
  20%,
  40%,
  60%,
  80% {
    transform: translate(-45%, -50%);
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}
/* ---- State indicators */
/* Plan BG */
.state-construction {
  background-color: #ffeecc;
}
.state-enclosed {
  background-color: #d1ffd1;
}
.state-broken {
  background-color: #ffdddd;
}
/* Plan State Label */
.label-construction {
  background-color: #ffeecc;
}
.label-enclosed {
  background-color: #d1ffd1;
}
.label-broken {
  background-color: #ffdddd;
}

/* Canvas state styling */
#planCanvas.state-broken {
  border: 2px dashed #cc0000;
}

#planCanvas.state-enclosed {
  border: 2px solid #00aa00;
}

#planCanvas.state-construction {
  border: 2px dotted #ff9900;
}

/* Element states */
.element.inactive-element {
  opacity: 0.5;
  filter: grayscale(80%);
  pointer-events: none;
}

.element.outside-enclosure {
  border: 2px dashed #cc0000;
  animation: pulse-red 1s infinite;
}

/* Placement restrictions */
.temporary-element.invalid-placement {
  background-color: rgba(255, 0, 0, 0.3);
  border: 2px dashed #cc0000;
}

.temporary-element.valid-placement {
  background-color: rgba(0, 255, 0, 0.2);
  border: 2px dashed #00aa00;
}

/* Guidance message */
.guidance-message.pulse {
  animation: pulse-blue 0.5s;
}

/* Disabled tool buttons */
.tool-btn.disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Animations */
@keyframes pulse-red {
  0% {
    box-shadow: 0 0 0 0 rgba(204, 0, 0, 0.4);
  }
  70% {
    box-shadow: 0 0 0 10px rgba(204, 0, 0, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(204, 0, 0, 0);
  }
}

@keyframes pulse-blue {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
  100% {
    transform: scale(1);
  }
}

/* Tooltip styles */
.info-icon {
  transition: transform 0.2s ease;
}

.info-icon:hover,
.info-icon:focus {
  transform: scale(1.2);
  outline: none;
}

.tooltip-content {
  pointer-events: none;
  max-width: 250px;
  word-wrap: break-word;
  z-index: 50;
}

/* Class added by JS */
.tooltip-show {
  opacity: 1 !important;
  visibility: visible !important;
}

/* Tooltip styles end */

/* Scale */
.scale-container {
  margin-bottom: 10px;
}

#scale-bar {
  width: 100px; /* Largeur par défaut pour 1m à zoom 100% */
  border-radius: 1px;
  transition: width 0.3s ease;
}

.scale-bar-divisions {
  position: relative;
  width: 100%;
  height: 100%;
}

.scale-bar-division {
  position: absolute;
  top: 0;
  width: 1px;
  height: 8px;
  background-color: black;
}

/* Scale end */

/* Tool btns */
.tool-btn svg rect,
.tool-btn svg .blob,
.tool-btn svg [id$='-bg'] {
  transition:
    fill 0.3s ease,
    opacity 0.3s ease;
}

.tool-btn:hover rect {
  fill: #f2e9d5;
}
.active-tool {
  /* Change blob */
  & .blob {
    fill: #fff;
    opacity: 0.5;
  }
  /* Change bg color */
  & #tree-bg {
    fill: #b6d5a0;
  }
  & #dustbath-bg {
    fill: #d0bea8;
  }
  & #fence-bg {
    fill: #ecbb95;
  }
  & #insectary-bg {
    fill: #b8c6e1;
  }
  & #waterer-bg {
    fill: #a7d1c6;
  }
  & #shrub-bg {
    fill: #81b994;
  }
  & #shelter-bg {
    fill: #f4cf8c;
  }
  & #perch-bg {
    fill: #d2db93;
  }
  /* mini tools */
  &.mini-tool {
    background-color: #f1781e !important;
  }
}
